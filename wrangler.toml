name = "handshake"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
workers_dev = true
preview_urls = false

[[d1_databases]]
binding = "DB"
database_name = "handshake-db"
database_id = "2e5d85a9-9800-4477-b8ef-ecc01bede6d6"

[[kv_namespaces]]
binding = "KV"
id = "3053f3b8b2d448a8b5d5966d77582eb1"

[vars]
ENVIRONMENT = "development"

[env.production]
name = "handshake-production"

[[env.production.d1_databases]]
binding = "DB"
database_name = "handshake-db"
database_id = "2e5d85a9-9800-4477-b8ef-ecc01bede6d6"

[[env.production.kv_namespaces]]
binding = "KV"
id = "3053f3b8b2d448a8b5d5966d77582eb1"

[env.production.vars]
ENVIRONMENT = "production"

# Secrets to set via `wrangler secret put` (per environment):
# - GOOGLE_CLIENT_ID
# - GOOGLE_CLIENT_SECRET
# - GITHUB_CLIENT_ID
# - GITHUB_CLIENT_SECRET
# - JWT_PRIVATE_KEY (base64-encoded PKCS#8)
# - JWT_PUBLIC_KEY (base64-encoded SPKI)
# - JWT_KEY_ID (e.g., "key-1")
# - INTERNAL_TRUST_SHARED_SECRET (HS256 key for internal trust tokens)
